
> pddi-warfarin-nsaid-test1@1.0.0 test /Users/erc53/Github/CQL-Testing-Framework/pddi-rule-tests/citalopram-qt
> mocha --reporter spec --recursive

CQLT Config: /Users/erc53/Github/CQL-Testing-Framework/pddi-rule-tests/citalopram-qt/cqlt.yaml
Ignoring potential external data file: /Users/erc53/Github/CQL-Testing-Framework/pddi-rule-tests/citalopram-qt/tests/reusable_resources.yml


  Citalopram-QT-Prolonging-Agents_v1.0
    1) Citalopram not high dose with a QT-agent
    2) High dose citalopram with no QT agent
    3) High dose of citalopram with a QT agent


  0 passing (344ms)
  3 failing

  1) Citalopram-QT-Prolonging-Agents_v1.0
       Citalopram not high dose with a QT-agent:

      Summary=<[object Object]>
      + expected - actual

       {
      -  "Alert": {
      -    "Rationale": [null]
      -    "Recommendation": "No special precaution"
      -  }
         "HistoricalTreatments": {
      -    "BasicConcomitant": true
           "Citaloprams": [
             {
      -        "Amount": 10
      -        "DailyDosage": 10
      -        "Dosage": 1
               "End": [null]
      -        "Ingredient": "Citalopram"
               "Name": "Citalopram 10 MG Oral Tablet"
               "Start": "2019-07-30T00:00:00.000+00:00"
               "Status": "active"
      +        "Type": "Statement"
             }
           ]
      -    "HighCitalopramDose": [
      -      false
      -    ]
           "QTProlongingAgents": [
             {
               "End": [null]
               "Name": "Ondansetron 4 MG Oral Tablet"
      
      at checkResult (node_modules/cql-testing/src/buildTestSuite.js:123:36)
      at Context.<anonymous> (node_modules/cql-testing/src/buildTestSuite.js:113:11)
      at processImmediate (internal/timers.js:439:21)

  2) Citalopram-QT-Prolonging-Agents_v1.0
       High dose citalopram with no QT agent:

      Summary=<[object Object]>
      + expected - actual

       {
      -  "Alert": {
      -    "Rationale": "Increased risk of prolonged QTc possible"
      -    "Recommendation": "Minimize risk and Monitor ECG"
      -  }
         "HistoricalTreatments": {
      -    "BasicConcomitant": false
           "Citaloprams": [
             {
      -        "Amount": 10
      -        "DailyDosage": 80
      -        "Dosage": 8
               "End": [null]
      -        "Ingredient": "Citalopram"
               "Name": "Citalopram 10 MG Oral Tablet"
               "Start": "2019-07-30T00:00:00.000+00:00"
               "Status": "active"
      +        "Type": "Statement"
             }
           ]
      -    "HighCitalopramDose": [
      -      true
      +    "QTProlongingAgents": [
      +      {
      +        "End": [null]
      +        "Name": "Ondansetron 4 MG Oral Tablet"
      +        "Start": "2019-08-01T00:00:00.000+00:00"
      +        "Status": "active"
      +        "Type": "Statement"
      +      }
           ]
      -    "QTProlongingAgents": []
         }
         "Patient": {
           "Age": 65
           "Gender": "male"
      
      at checkResult (node_modules/cql-testing/src/buildTestSuite.js:123:36)
      at Context.<anonymous> (node_modules/cql-testing/src/buildTestSuite.js:113:11)
      at processImmediate (internal/timers.js:439:21)

  3) Citalopram-QT-Prolonging-Agents_v1.0
       High dose of citalopram with a QT agent:

      Summary=<[object Object]>
      + expected - actual

       {
      -  "Alert": {
      -    "Rationale": "Increased risk of prolonged QTc likely"
      -    "Recommendation": "Use only if benefit outweighs risk and monitor patient ECG "
      -  }
         "HistoricalTreatments": {
      -    "BasicConcomitant": true
           "Citaloprams": [
             {
      -        "Amount": 10
      -        "DailyDosage": 80
      -        "Dosage": 8
               "End": [null]
      -        "Ingredient": "Citalopram"
               "Name": "Citalopram 10 MG Oral Tablet"
               "Start": "2019-07-30T00:00:00.000+00:00"
               "Status": "active"
      +        "Type": "Statement"
             }
           ]
      -    "HighCitalopramDose": [
      -      true
      -    ]
           "QTProlongingAgents": [
             {
               "End": [null]
               "Name": "Ondansetron 4 MG Oral Tablet"
      
      at checkResult (node_modules/cql-testing/src/buildTestSuite.js:123:36)
      at Context.<anonymous> (node_modules/cql-testing/src/buildTestSuite.js:113:11)
      at processImmediate (internal/timers.js:439:21)



